<!DOCTYPE html>
<html>
<head>
  <title>Spring WebSocket Chat</title>
  <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
</head>
<body>
<input id="sender" placeholder="nickname">
<input id="content" placeholder="message">
<button onclick="sendMessage()">send</button>
<ul id="messages"></ul>
<script>
  var stompClient = null;
  function connect() {
    var socket = new SockJS('/ws-chat');
    stompClient = Stomp.over(socket);
    stompClient.connect({}, function(frame) {
      stompClient.subscribe('/topic/messages', function(message) {
        var msg = JSON.parse(message.body);
        var li = document.createElement('li');
        li.innerText = msg.sender + ': ' + msg.content;
        document.getElementById('messages').appendChild(li);
      });
    });
  }
  function sendMessage() {
    var sender = document.getElementById('sender').value;
    var content = document.getElementById('content').value;
    stompClient.send("/app/chat.send", {}, JSON.stringify({sender: sender, content: content}));
  }
  connect();
</script>
</body>
</html>